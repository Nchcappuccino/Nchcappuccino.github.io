---
layout: post
title:  "ロボコンでよく使われるパーツ マイコン編"
# summary: ""
author: yamaguchi
date: '2021-03-03 11:28:00 +0900'
category: ['入門','パーツ紹介']
usemathjax: false
permalink: /blog/adding-categories-tags-in-posts/
---
# ロボコンでよく使われるパーツ マイコン編
こんにちは！山口です。  
今日からブログを本格的に運用していこうと思います。  
# 内容  
内容はタイトル通り、ロボコンでよく使われるパーツ マイコン編です。  
この記事は入門と言いながらも、難しい内容も結構混ざっているので分からないところは読み飛ばしながらで構いません。  
今の自分では理解できなくても、**半年後の自分なら理解できる**と考えれば問題ないです。

# マイコン
マイコンとは簡単に言うと、人間でいう頭脳のことで、プログラミングをすることによって命令ができるようになります。  
よく使われるのは  
- Arduino
- Arduinoから派生したもの
- STM32
- PIC

などがあります。 

僕がマイコンを選ぶときは
- Arduinoのライブラリを使うことができるか
- 値段
- なるべく慣れているものを選ぶ

を大切にしています。    
ちなみに僕は、ESP32とSTM32を使っていて、Arduinoのライブラリを使いたいときや無線で通信をしたいときはESP32、そうでないときはSTM32というように使い分けています。
### Arduino(アルディーノ)
![Arduino](/assets/img/posts/20210303/arduino.jpg)  
[Arduino](https://akizukidenshi.com/catalog/g/gM-07385/)はマイコンの名前ではなくマイコンボードの名前ですが、特に理由がない限りArduinoで通じます。  
マイコンとマイコンボードの違いは
- マイコンはチップ単体のみのこと
- マイコンボードはチップが実装されてる基板全体 

のことを指します。  

![Arduino_exprain](/assets/img/posts/20210303/arduino_explain.jpg)  
Arduino Unoで言うと、マイコンはATmega328P、マイコンボードの名前がArduino Unoになります。  
実はArduinoにはマイコンが2つ乗ってたりします(知らなくていい)  
Arduinoの特徴としては
##### メリット  
- 開発がめっちゃ簡単
- 日本語の情報も多い
- ライブラリが豊富

##### デメリット
- 正規品は頭おかしいくらいに高い
- 難しいことをことをするには性能が足りない
- そんなにコスパよくない

僕としては、入門にはArduino。何か物を作るときはAduinoの派生マイコンを使うと、性能が高い上にArduinoの開発が簡単だという長所を生かせるのでいいと思います。  
ちなみに、Arduinoには[Arduino Uno](https://akizukidenshi.com/catalog/g/gM-07385/)意外には、[Arduino Mega](https://akizukidenshi.com/catalog/g/gM-07381/)、[Arduino Nano](https://akizukidenshi.com/catalog/g/gM-09059/)や[中華の互換Arduino](www.amazon.co.jp/dp/B072F5NS4X)などがあります。
### Arduinoから派生したマイコン
Arduinoの開発環境でもっと強いマイコンを使えるようにしたのがArduinoから派生したマイコンです。  
派生なので種類は無数にありますが、[ESP32](https://akizukidenshi.com/catalog/g/gM-15673/)と[Teensy](https://www.switch-science.com/catalog/5877/)が有名です。
### ESP32
![ESP32](/assets/img/posts/20210303/ESP32.jpg)  
ロボ研では普段はこのマイコンを使ってます。ロボコンで使ってるチームがいる以外にも、IoT製品などにもよく使われています。  
ちなみに[ESP32](https://akizukidenshi.com/catalog/g/gM-15673/)は他のマイコンと比べて種類が少なく、数種類しかありません。

##### メリット
- Arduinoと同じ開発環境で開発が可能
- コアが2つついてて、しかも動作クロックが240MHzだから超速い
- wifiとbluetoothが使えるから、IoTなどにも使える、ゲーム機のコントローラーとの通信も簡単
- ESP32でしかできないことの豊富なライブラリ
- コスパいい [マイコン単体](https://akizukidenshi.com/catalog/g/gM-15675/)は360円くらい、開発ボード(そのままブレッドボードにぶっさせるやつ)でも1200円くらい
##### デメリット
- サイズが大きくて、回路設計がかなりしにくい
- 自由に使えるピンの数が少ない
- PWM関係の設定があまり細かくできないので、本気でアクチュエータ動かすのには不向き

[M5Stack](https://www.switch-science.com/catalog/3647/)という面白いのもあるので興味のある方は調べてみてください。  
**AmazonやAliexpressなどでもESP32が安く出回っていますが、技適が通っていないことがあるので購入するときは電子部品を専門で扱っているサイトで買いましょう。**
### Teensy
![Teensy](/assets/img/posts/20210303/teensy.jpg)  
[Teensy](https://www.switch-science.com/catalog/5877/)は僕や僕の周りに使ってる人間がいないので詳しいことは分からないので、僕の印象で書きます。  

このマイコンも高専ロボコンだけでなく、RCJ(ロボカップジュニア)やロボマスなどでよく使われています。  
##### メリット
- Arduinoと同じ開発環境で開発が可能
- 性能がレベチ、間違いなく今回紹介するマイコンの中では性能が高い
- 小さなサイズでたくさんのピンが使えるのでユニバーサル基板を使った開発には一番向いてるかも
##### デメリット
- 高い 
- 英語込みで考えても情報が少ない

正直Teensyは高いので使う意味はない気がします。
### STM32(Nucleo)
![STM32](/assets/img/posts/20210303/stm32.jpg)  
[STM32](https://akizukidenshi.com/catalog/g/gM-10176/)は扱えれば最強のマイコンです。  
僕も扱っていますが、ほとんど使いこなせていません。
扱うにはかなりの知識と技術が必要です。  
ロボコンだけでなく、企業などでもいろんなことに世界的に使われています。

##### メリット
- 安くて、超高性能、GPIOが強力なのでセンサーを読むのやアクチュエータを**本気で**動かすのに向いてる
- マイコンの機能を細かく設定できる
- 多様な開発環境(Arduino IDEからCubeIDE、Mbedまで)
- シリーズが多いので、自分の合った用途に、詳しいことは改めて記事にするかも
##### デメリット
-  頭おかしいくらいに難しい
- 入手性が悪い、基本的には[mouser](https://www.mouser.jp/)や[digikey](https://www.digikey.jp/)などで海外から入手するしかない
- Arduinoのライブラリが使えない()

これは僕がこの前実際に起きた出来事なんですけど、STM32F446ret6を購入しようとしたら、mouserとdigikeyの両方で在庫が切れていて購入できないという事件が起きました。  
コロナで半導体の工場の出荷量が減っていてこのようなことがあったので気を付けましょう。

### PIC
PICは扱えたらかっこいいマイコンですが、あえて使う理由はないのでおすすめはしないです。

##### メリット
- 安い
##### デメリット
- 難しい
- 重い処理は向かない
- Arduinoのライブラリが使えない

# 結論
僕のおすすめのマイコンはESP32です。  
ESP32は初心者でもArduinoと同じように扱えるのでおすすめです。  
記事を読んで分かった通り、Arduinoのライブラリが使えるか使えないかで開発の難易度が大きく変わることを知ってもらえたら嬉しいです。

そして、ある程度ESP32を使えるようになったらSTM32とかを使ってみるといいかもしれませんね。

余談ですが、ArduinoとESP32の開発環境はVSCode+platformIOが簡単なのでおすすめです。  
今後詳しく紹介する予定です。

# 次回
次回はセンサー編になると思います。